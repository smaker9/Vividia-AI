<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vividia AI - Ù…Ù†ØµØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØµÙˆØªÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #030712;
            --darker: #020617;
            --card: #111827;
            --border: #1f2937;
            --text: #f9fafb;
            --text-muted: #9ca3af;
        }

        body {
            background: var(--darker);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(3, 7, 18, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 32px;
        }

        .nav-link {
            color: var(--text-muted);
            cursor: pointer;
            transition: 0.3s;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--text);
        }

        /* Ù…Ø­ÙˆÙ„ Ø§Ù„Ù„ØºØ§Øª */
        .language-selector {
            position: relative;
        }

        .current-lang {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 300px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 8px;
            padding: 12px;
            display: none;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            z-index: 1000;
        }

        .language-selector:hover .lang-dropdown {
            display: grid;
        }

        .lang-option {
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
        }

        .lang-option:hover {
            background: var(--border);
        }

        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .credits {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: bold;
        }

        .plan {
            background: var(--warning);
            color: var(--darker);
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: bold;
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 100px 20px 20px;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            text-align: center;
            padding: 60px 20px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 24px;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .product-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .product-icon {
            font-size: 2rem;
            margin-bottom: 16px;
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .product-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 16px;
        }

        .product-price {
            color: var(--primary);
            font-weight: 600;
        }

        /* Ø®Ø·Ø· Ø§Ù„Ø£Ø³Ø¹Ø§Ø± */
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 40px 0;
        }

        .pricing-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 32px;
            position: relative;
        }

        .pricing-card.popular {
            border-color: var(--primary);
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
        }

        .popular-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--warning);
            color: var(--darker);
            padding: 4px 20px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .plan-price {
            font-size: 2rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .plan-price small {
            font-size: 1rem;
            color: var(--text-muted);
        }

        .plan-features {
            list-style: none;
            margin: 20px 0;
        }

        .plan-features li {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .plan-features li::before {
            content: "âœ“";
            color: var(--success);
            font-weight: bold;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
        }

        .crypto-address {
            background: var(--darker);
            padding: 16px;
            border-radius: 8px;
            font-family: monospace;
            margin: 20px 0;
            word-break: break-all;
        }

        /* Ø³Ø¬Ù„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ */
        .history-grid {
            display: grid;
            gap: 12px;
        }

        .history-item {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <nav class="navbar">
        <div class="logo">Vividia AI</div>
        
        <div class="nav-links">
            <span class="nav-link active" onclick="showSection('create')">Ø¥Ù†Ø´Ø§Ø¡</span>
            <span class="nav-link" onclick="showSection('pricing')">Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</span>
            <span class="nav-link" onclick="showSection('history')">Ø§Ù„Ø³Ø¬Ù„</span>
        </div>

        <div style="display: flex; align-items: center; gap: 20px;">
            <!-- Ù…Ø­ÙˆÙ„ Ø§Ù„Ù„ØºØ§Øª -->
            <div class="language-selector">
                <div class="current-lang">
                    <span id="currentLangFlag">ğŸ‡¸ğŸ‡¦</span>
                    <span id="currentLangName">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                </div>
                <div class="lang-dropdown" id="langDropdown"></div>
            </div>

            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <div class="user-info">
                <span class="credits" id="creditsDisplay">100</span>
                <span class="plan" id="planDisplay">Ù…Ø¬Ø§Ù†ÙŠ</span>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <div class="header">
            <h1>
                <span class="gradient-text">Vividia AI</span>
                <br>Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØµÙˆØªÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </h1>
            <p>Ø­ÙˆÙ‘Ù„ Ù†ØµÙˆØµÙƒ Ø¥Ù„Ù‰ Ù…Ù‚Ø§Ø·Ø¹ ØµÙˆØªÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ -->
        <div id="createSection">
            <div class="products-grid">
                <div class="product-card" onclick="openTool('tts')">
                    <div class="product-icon">ğŸ™ï¸</div>
                    <div class="product-title">Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª</div>
                    <div class="product-desc">ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù… Ø·Ø¨ÙŠØ¹ÙŠ</div>
                    <div class="product-price">10 Ù†Ù‚Ø§Ø·</div>
                </div>
                <div class="product-card" onclick="openTool('dub')">
                    <div class="product-icon">ğŸŒ</div>
                    <div class="product-title">Ø¯Ø¨Ù„Ø¬Ø© ÙÙŠØ¯ÙŠÙˆ</div>
                    <div class="product-desc">ØªØ±Ø¬Ù…Ø© ÙˆØ¯Ø¨Ù„Ø¬Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</div>
                    <div class="product-price">50 Ù†Ù‚Ø·Ø©</div>
                </div>
                <div class="product-card" onclick="openTool('sfx')">
                    <div class="product-icon">ğŸ”Š</div>
                    <div class="product-title">Ù…Ø¤Ø«Ø±Ø§Øª ØµÙˆØªÙŠØ©</div>
                    <div class="product-desc">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¤Ø«Ø±Ø§Øª ØµÙˆØªÙŠØ© Ù…Ø®ØµØµØ©</div>
                    <div class="product-price">5 Ù†Ù‚Ø§Ø·</div>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± -->
        <div id="pricingSection" style="display: none;">
            <div class="pricing-grid">
                <!-- Ù…Ø¬Ø§Ù†ÙŠ -->
                <div class="pricing-card">
                    <h3>Ù…Ø¬Ø§Ù†ÙŠ</h3>
                    <div class="plan-price">$0 <small>/Ø´Ù‡Ø±</small></div>
                    <ul class="plan-features">
                        <li>100 Ù†Ù‚Ø·Ø© Ø´Ù‡Ø±ÙŠØ§Ù‹</li>
                        <li>Ø£ØµÙˆØ§Øª Ø£Ø³Ø§Ø³ÙŠØ©</li>
                        <li>Ø¬ÙˆØ¯Ø© Ø¹Ø§Ø¯ÙŠØ©</li>
                    </ul>
                    <button class="btn btn-secondary" onclick="selectPlan('free')">Ù…Ø´ØªØ±Ùƒ Ø­Ø§Ù„ÙŠØ§Ù‹</button>
                </div>

                <!-- Ø§Ø­ØªØ±Ø§ÙÙŠ -->
                <div class="pricing-card popular">
                    <span class="popular-badge">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</span>
                    <h3>Ø§Ø­ØªØ±Ø§ÙÙŠ</h3>
                    <div class="plan-price">$19.99 <small>/Ø´Ù‡Ø±</small></div>
                    <ul class="plan-features">
                        <li>1000 Ù†Ù‚Ø·Ø© Ø´Ù‡Ø±ÙŠØ§Ù‹</li>
                        <li>Ø£ØµÙˆØ§Øª Ù…ØªÙ…ÙŠØ²Ø©</li>
                        <li>Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©</li>
                        <li>Ø¯Ø¨Ù„Ø¬Ø© ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</li>
                    </ul>
                    <button class="btn btn-primary" onclick="showPaymentModal('pro')">Ø§Ø´ØªØ±Ø§Ùƒ</button>
                </div>

                <!-- ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯ -->
                <div class="pricing-card">
                    <h3>ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯</h3>
                    <div class="plan-price">$49.99 <small>/Ø´Ù‡Ø±</small></div>
                    <ul class="plan-features">
                        <li>Ù†Ù‚Ø§Ø· ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©</li>
                        <li>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙˆØ§Øª</li>
                        <li>Ø¬ÙˆØ¯Ø© ÙØ§Ø¦Ù‚Ø©</li>
                        <li>Ø¯Ø¨Ù„Ø¬Ø© ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©</li>
                    </ul>
                    <button class="btn btn-primary" onclick="showPaymentModal('unlimited')">Ø§Ø´ØªØ±Ø§Ùƒ</button>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø³Ø¬Ù„ -->
        <div id="historySection" style="display: none;">
            <div class="history-grid" id="historyList"></div>
        </div>
    </div>

    <!-- Modal Ø§Ù„Ø£Ø¯Ø§Ø© -->
    <div class="modal" id="toolModal">
        <div class="modal-content" id="toolContent"></div>
    </div>

    <!-- Modal Ø§Ù„Ø¯ÙØ¹ -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <h3 id="paymentTitle">Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ø­ØªØ±Ø§ÙÙŠ</h3>
            <p style="margin: 20px 0;">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</p>
            
            <div style="margin-bottom: 20px;">
                <div style="background: var(--border); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                    <strong>ğŸª™ Cryptomus</strong>
                    <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 8px;">Bitcoin, Ethereum, USDT, BNB, SOL</p>
                </div>
            </div>

            <div id="cryptoPayment">
                <p>Ù„Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Cryptomus:</p>
                <div class="crypto-address" id="cryptoAddress">
                    bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh
                </div>
                <button class="btn btn-primary" onclick="processCryptoPayment()" style="margin-bottom: 10px;">
                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹
                </button>
                <button class="btn btn-secondary" onclick="closeModal()">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ====================
        const ELEVENLABS_KEY = "sk_9e048006fa8c6ebe0068240531808bba33c809c6f43313fe";
        const CRYPTOMUS_MERCHANT_ID = "6Va2ikdcfMbYwog2wJf6thH21iq0fbI9FSLXOefkbFg7pNgRy5WA8ijFqxnBjCc5IF3anDhDzdM5DaqLKN54KUngfpdj5RqBbJ5AG1balI8KeULyrEXallo7qqx0oH57";
        const CRYPTOMUS_API_KEY = "6Va2ikdcfMbYwog2wJf6thH21iq0fbI9FSLXOefkbFg7pNgRy5WA8ijFqxnBjCc5IF3anDhDzdM5DaqLKN54KUngfpdj5RqBbJ5AG1balI8KeULyrEXallo7qqx0oH57";

        // ==================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        let currentUser = {
            email: localStorage.getItem('user_email') || '',
            plan: localStorage.getItem('user_plan') || 'free',
            credits: parseInt(localStorage.getItem('user_credits')) || 100,
            history: JSON.parse(localStorage.getItem('user_history')) || []
        };

        // ==================== Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ====================
        const languages = [
            { code: 'ar', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦' },
            { code: 'en', name: 'English', flag: 'ğŸ‡¬ğŸ‡§' },
            { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
            { code: 'hi', name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³' },
            { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
            { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
            { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
            { code: 'ru', name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º' },
            { code: 'pt', name: 'PortuguÃªs', flag: 'ğŸ‡µğŸ‡¹' },
            { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
            { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
            { code: 'tr', name: 'TÃ¼rkÃ§e', flag: 'ğŸ‡¹ğŸ‡·' },
            { code: 'it', name: 'Italiano', flag: 'ğŸ‡®ğŸ‡¹' },
            { code: 'nl', name: 'Nederlands', flag: 'ğŸ‡³ğŸ‡±' },
            { code: 'pl', name: 'Polski', flag: 'ğŸ‡µğŸ‡±' },
            { code: 'fa', name: 'ÙØ§Ø±Ø³ÛŒ', flag: 'ğŸ‡®ğŸ‡·' },
            { code: 'ur', name: 'Ø§Ø±Ø¯Ùˆ', flag: 'ğŸ‡µğŸ‡°' },
            { code: 'he', name: '×¢×‘×¨×™×ª', flag: 'ğŸ‡®ğŸ‡±' },
            { code: 'id', name: 'Indonesia', flag: 'ğŸ‡®ğŸ‡©' },
            { code: 'th', name: 'à¹„à¸—à¸¢', flag: 'ğŸ‡¹ğŸ‡­' },
            { code: 'vi', name: 'Tiáº¿ng Viá»‡t', flag: 'ğŸ‡»ğŸ‡³' },
            { code: 'sv', name: 'Svenska', flag: 'ğŸ‡¸ğŸ‡ª' },
            { code: 'da', name: 'Dansk', flag: 'ğŸ‡©ğŸ‡°' },
            { code: 'no', name: 'Norsk', flag: 'ğŸ‡³ğŸ‡´' },
            { code: 'fi', name: 'Suomi', flag: 'ğŸ‡«ğŸ‡®' },
            { code: 'el', name: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬', flag: 'ğŸ‡¬ğŸ‡·' },
            { code: 'cs', name: 'ÄŒeÅ¡tina', flag: 'ğŸ‡¨ğŸ‡¿' },
            { code: 'hu', name: 'Magyar', flag: 'ğŸ‡­ğŸ‡º' },
            { code: 'ro', name: 'RomÃ¢nÄƒ', flag: 'ğŸ‡·ğŸ‡´' }
        ];

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', () => {
            initLanguages();
            updateUserDisplay();
            loadHistory();
            checkURLParams();
        });

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„ØºØ§Øª ====================
        function initLanguages() {
            const dropdown = document.getElementById('langDropdown');
            languages.forEach(lang => {
                const div = document.createElement('div');
                div.className = 'lang-option';
                div.innerHTML = `${lang.flag} ${lang.name}`;
                div.onclick = () => changeLanguage(lang.code);
                dropdown.appendChild(div);
            });

            const savedLang = localStorage.getItem('language') || 'ar';
            changeLanguage(savedLang);
        }

        // ==================== ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© ====================
        function changeLanguage(code) {
            const lang = languages.find(l => l.code === code);
            if (!lang) return;

            document.getElementById('currentLangFlag').textContent = lang.flag;
            document.getElementById('currentLangName').textContent = lang.name;
            document.documentElement.lang = code;
            document.documentElement.dir = code === 'ar' || code === 'fa' || code === 'ur' || code === 'he' ? 'rtl' : 'ltr';
            localStorage.setItem('language', code);
        }

        // ==================== ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        function updateUserDisplay() {
            document.getElementById('creditsDisplay').textContent = currentUser.credits;
            document.getElementById('planDisplay').textContent = 
                currentUser.plan === 'free' ? 'Ù…Ø¬Ø§Ù†ÙŠ' : 
                currentUser.plan === 'pro' ? 'Ø§Ø­ØªØ±Ø§ÙÙŠ' : 'ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯';
            
            localStorage.setItem('user_plan', currentUser.plan);
            localStorage.setItem('user_credits', currentUser.credits);
        }

        // ==================== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ====================
        function showSection(section) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            event.currentTarget.classList.add('active');

            document.getElementById('createSection').style.display = section === 'create' ? 'block' : 'none';
            document.getElementById('pricingSection').style.display = section === 'pricing' ? 'block' : 'none';
            document.getElementById('historySection').style.display = section === 'history' ? 'block' : 'none';
        }

        // ==================== ÙØªØ­ Ø£Ø¯Ø§Ø© ====================
        function openTool(tool) {
            if (currentUser.credits < getToolCost(tool)) {
                alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ±Ù‚ÙŠØ© Ø®Ø·ØªÙƒ');
                showSection('pricing');
                return;
            }

            const modal = document.getElementById('toolModal');
            const content = document.getElementById('toolContent');

            if (tool === 'tts') {
                content.innerHTML = getTTSInterface();
            } else if (tool === 'dub') {
                content.innerHTML = getDubbingInterface();
            } else if (tool === 'sfx') {
                content.innerHTML = getSFXInterface();
            }

            modal.classList.add('active');
        }

        function getToolCost(tool) {
            const costs = { tts: 10, dub: 50, sfx: 5 };
            return costs[tool] || 0;
        }

        // ==================== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª ====================
        function getTTSInterface() {
            return `
                <h3 style="margin-bottom: 20px;">ğŸ™ï¸ Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª</h3>
                <textarea id="ttsText" rows="5" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
                
                <select id="ttsVoice" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;">
                    <option value="21m00Tcm4TlvDq8ikWAM">ØµÙˆØª Ø°ÙƒØ± (Ø¹Ø±Ø¨ÙŠ)</option>
                    <option value="AZnzlk1XvdvUeBnXmlld">ØµÙˆØª Ø£Ù†Ø«Ù‰ (Ø¹Ø±Ø¨ÙŠ)</option>
                    <option value="EXAVITQu4vr4xnSDxMaL">English Voice</option>
                </select>
                
                <button class="btn btn-primary" onclick="generateTTS()" style="margin-bottom: 20px;">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØª</button>
                
                <div id="ttsResult" style="display: none;">
                    <audio id="ttsAudio" controls style="width: 100%;"></audio>
                </div>
                
                <button class="btn btn-secondary" onclick="closeToolModal()">Ø¥ØºÙ„Ø§Ù‚</button>
            `;
        }

        // ==================== ØªÙˆÙ„ÙŠØ¯ ØµÙˆØª Ø­Ù‚ÙŠÙ‚ÙŠ ====================
        async function generateTTS() {
            const text = document.getElementById('ttsText').value;
            const voiceId = document.getElementById('ttsVoice').value;

            if (!text) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ');
                return;
            }

            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {
                    method: 'POST',
                    headers: {
                        'Accept': 'audio/mpeg',
                        'Content-Type': 'application/json',
                        'xi-api-key': ELEVENLABS_KEY
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: 'eleven_monolingual_v1',
                        voice_settings: {
                            stability: 0.5,
                            similarity_boost: 0.5
                        }
                    })
                });

                if (!response.ok) throw new Error('ÙØ´Ù„ Ø§Ù„ØªÙˆÙ„ÙŠØ¯');

                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);

                document.getElementById('ttsResult').style.display = 'block';
                document.getElementById('ttsAudio').src = audioUrl;

                // Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·
                currentUser.credits -= 10;
                updateUserDisplay();

                // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
                saveToHistory('tts', text, audioUrl);

            } catch (error) {
                console.error('TTS Error:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØª');
            }
        }

        // ==================== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø© ====================
        function getDubbingInterface() {
            return `
                <h3 style="margin-bottom: 20px;">ğŸŒ Ø¯Ø¨Ù„Ø¬Ø© ÙÙŠØ¯ÙŠÙˆ</h3>
                <input type="url" id="videoUrl" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ">
                
                <select id="targetLang" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;">
                    ${languages.map(l => `<option value="${l.code}">${l.flag} ${l.name}</option>`).join('')}
                </select>
                
                <button class="btn btn-primary" onclick="processDubbing()" style="margin-bottom: 20px;">Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø©</button>
                
                <div id="dubProgress" style="display: none;">
                    <div style="width: 100%; height: 10px; background: var(--border); border-radius: 5px; overflow: hidden;">
                        <div id="dubProgressBar" style="height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); width: 0%;"></div>
                    </div>
                </div>
                
                <button class="btn btn-secondary" onclick="closeToolModal()">Ø¥ØºÙ„Ø§Ù‚</button>
            `;
        }

        // ==================== Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø© ====================
        async function processDubbing() {
            const videoUrl = document.getElementById('videoUrl').value;
            const targetLang = document.getElementById('targetLang').value;

            if (!videoUrl) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
                return;
            }

            if (currentUser.plan === 'free') {
                alert('Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø© Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©');
                closeToolModal();
                showSection('pricing');
                return;
            }

            document.getElementById('dubProgress').style.display = 'block';
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('dubProgressBar').style.width = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    alert('ØªÙ…Øª Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                    
                    // Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·
                    currentUser.credits -= 50;
                    updateUserDisplay();
                    
                    // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
                    saveToHistory('dub', videoUrl, '');
                    
                    closeToolModal();
                }
            }, 500);
        }

        // ==================== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª ====================
        function getSFXInterface() {
            return `
                <h3 style="margin-bottom: 20px;">ğŸ”Š Ù…Ø¤Ø«Ø±Ø§Øª ØµÙˆØªÙŠØ©</h3>
                <input type="text" id="sfxPrompt" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ø¤Ø«Ø± Ø§Ù„ØµÙˆØªÙŠ">
                
                <select id="sfxCategory" style="width: 100%; background: var(--darker); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: white; margin-bottom: 20px;">
                    <option value="explosion">Ø§Ù†ÙØ¬Ø§Ø±</option>
                    <option value="nature">Ø·Ø¨ÙŠØ¹Ø©</option>
                    <option value="horror">Ø±Ø¹Ø¨</option>
                    <option value="cinematic">Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ</option>
                </select>
                
                <button class="btn btn-primary" onclick="generateSFX()" style="margin-bottom: 20px;">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø¤Ø«Ø±</button>
                
                <div id="sfxResult" style="display: none;">
                    <audio id="sfxAudio" controls style="width: 100%;"></audio>
                </div>
                
                <button class="btn btn-secondary" onclick="closeToolModal()">Ø¥ØºÙ„Ø§Ù‚</button>
            `;
        }

        // ==================== ØªÙˆÙ„ÙŠØ¯ Ù…Ø¤Ø«Ø±Ø§Øª ====================
        async function generateSFX() {
            const prompt = document.getElementById('sfxPrompt').value;
            const category = document.getElementById('sfxCategory').value;

            if (!prompt) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØµÙ Ø§Ù„Ù…Ø¤Ø«Ø±');
                return;
            }

            // Ù…Ø­Ø§ÙƒØ§Ø© ØªÙˆÙ„ÙŠØ¯ Ù…Ø¤Ø«Ø± (ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø³Ù†Ø³ØªØ®Ø¯Ù… API Ø­Ù‚ÙŠÙ‚ÙŠ)
            setTimeout(() => {
                const audioUrl = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3';
                document.getElementById('sfxResult').style.display = 'block';
                document.getElementById('sfxAudio').src = audioUrl;

                // Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø·
                currentUser.credits -= 5;
                updateUserDisplay();

                // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
                saveToHistory('sfx', prompt, audioUrl);
            }, 2000);
        }

        // ==================== Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯ÙØ¹ ====================
        function showPaymentModal(plan) {
            const titles = {
                pro: 'Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ø­ØªØ±Ø§ÙÙŠ - $19.99/Ø´Ù‡Ø±',
                unlimited: 'Ø§Ø´ØªØ±Ø§Ùƒ ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯ - $49.99/Ø´Ù‡Ø±'
            };
            
            document.getElementById('paymentTitle').textContent = titles[plan];
            document.getElementById('paymentModal').classList.add('active');
            currentSelectedPlan = plan;
        }

        let currentSelectedPlan = 'pro';

        // ==================== Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Cryptomus ====================
        async function processCryptoPayment() {
            const button = document.getElementById('paymentButton');
            const originalText = button.textContent;
            
            button.disabled = true;
            button.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡...';

            const prices = {
                pro: 19.99,
                unlimited: 49.99
            };

            try {
                // Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¯ÙØ¹ Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù€ Cryptomus
                const paymentData = {
                    merchant_id: CRYPTOMUS_MERCHANT_ID,
                    amount: prices[currentSelectedPlan].toString(),
                    currency: 'USD',
                    order_id: 'order_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                    url_return: window.location.href,
                    url_success: window.location.href + '?payment=success',
                    url_callback: 'https://vividia-ai.com/api/cryptomus-webhook',
                    is_payment_multiple: false,
                    lifetime: 3600,
                    to_currency: 'USDT'
                };

                // Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙ‚ÙŠØ¹ Ù„Ù„Ø·Ù„Ø¨
                const sign = await generateSignature(paymentData);

                // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹
                const response = await fetch('https://api.cryptomus.com/v1/payment', {
                    method: 'POST',
                    headers: {
                        'merchant': CRYPTOMUS_MERCHANT_ID,
                        'sign': sign,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(paymentData)
                });

                const result = await response.json();

                if (result.state === 0 && result.result) {
                    // ØªØ®Ø²ÙŠÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨
                    localStorage.setItem('current_payment', JSON.stringify({
                        plan: currentSelectedPlan,
                        order_id: paymentData.order_id,
                        url: result.result.url
                    }));

                    // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹
                    window.location.href = result.result.url;
                } else {
                    throw new Error('ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹');
                }

            } catch (error) {
                console.error('Payment error:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                
                button.disabled = false;
                button.textContent = originalText;
            }
        }

        // ==================== Ø¥Ù†Ø´Ø§Ø¡ ØªÙˆÙ‚ÙŠØ¹ Ù„Ø·Ù„Ø¨Ø§Øª Cryptomus ====================
        async function generateSignature(data) {
            const jsonString = JSON.stringify(data);
            const encoder = new TextEncoder();
            const dataBytes = encoder.encode(jsonString);
            const keyBytes = encoder.encode(CRYPTOMUS_API_KEY);

            const cryptoKey = await crypto.subtle.importKey(
                'raw', keyBytes, { name: 'HMAC', hash: 'SHA-256' }, false, ['sign']
            );

            const signature = await crypto.subtle.sign('HMAC', cryptoKey, dataBytes);
            return btoa(String.fromCharCode(...new Uint8Array(signature)));
        }

        // ==================== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¯ÙØ¹ ====================
        function checkURLParams() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.get('payment') === 'success') {
                const paymentData = localStorage.getItem('current_payment');
                if (paymentData) {
                    const data = JSON.parse(paymentData);

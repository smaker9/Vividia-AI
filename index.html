<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vividia AI - Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØµÙˆØªÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, sans-serif; }
        body { background: #030712; color: #f9fafb; min-height: 100vh; }
        .navbar { background: #111827; border-bottom: 1px solid #1f2937; padding: 16px 32px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; background: linear-gradient(135deg, #6366f1, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .user-info { display: flex; align-items: center; gap: 16px; }
        .credits { background: #6366f1; padding: 8px 16px; border-radius: 50px; font-weight: 600; }
        .plan { background: #f59e0b; color: #030712; padding: 8px 16px; border-radius: 50px; font-weight: 600; }
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .header { text-align: center; margin-bottom: 60px; }
        .header h1 { font-size: 3rem; margin-bottom: 16px; }
        .gradient-text { background: linear-gradient(135deg, #6366f1, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { color: #9ca3af; font-size: 1.2rem; }
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px; margin-bottom: 60px; }
        .tool-card { background: #111827; border: 1px solid #1f2937; border-radius: 24px; padding: 32px; cursor: pointer; transition: 0.3s; }
        .tool-card:hover { transform: translateY(-5px); border-color: #6366f1; box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2); }
        .tool-icon { font-size: 3rem; margin-bottom: 20px; }
        .tool-title { font-size: 1.5rem; font-weight: 600; margin-bottom: 12px; }
        .tool-desc { color: #9ca3af; margin-bottom: 20px; }
        .tool-price { color: #6366f1; font-weight: 600; font-size: 1.2rem; }
        .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal.active { display: flex; }
        .modal-content { background: #111827; border: 1px solid #1f2937; border-radius: 24px; padding: 40px; width: 90%; max-width: 600px; }
        textarea, select, input { width: 100%; background: #030712; border: 1px solid #1f2937; border-radius: 12px; padding: 16px; color: white; margin-bottom: 20px; }
        .btn { width: 100%; padding: 16px; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; transition: 0.3s; margin-bottom: 12px; }
        .btn-primary { background: linear-gradient(135deg, #6366f1, #ec4899); color: white; }
        .btn-secondary { background: transparent; border: 1px solid #1f2937; color: white; }
        .close { float: left; font-size: 2rem; cursor: pointer; color: #9ca3af; }
        .history-section { background: #111827; border: 1px solid #1f2937; border-radius: 24px; padding: 32px; }
        .history-item { background: #030712; border: 1px solid #1f2937; border-radius: 12px; padding: 16px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Vividia AI</div>
        <div class="user-info">
            <span class="credits" id="creditsDisplay">100</span>
            <span class="plan" id="planDisplay">Ù…Ø¬Ø§Ù†ÙŠ</span>
        </div>
    </nav>
    <div class="container">
        <div class="header">
            <h1><span class="gradient-text">Vividia AI</span></h1>
            <p>Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
        </div>
        <div class="tools-grid">
            <div class="tool-card" onclick="openTool('tts')"><div class="tool-icon">ğŸ™ï¸</div><div class="tool-title">Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª</div><div class="tool-price">10 Ù†Ù‚Ø§Ø·</div></div>
            <div class="tool-card" onclick="openTool('dub')"><div class="tool-icon">ğŸŒ</div><div class="tool-title">Ø¯Ø¨Ù„Ø¬Ø©</div><div class="tool-price">50 Ù†Ù‚Ø·Ø©</div></div>
            <div class="tool-card" onclick="openTool('sfx')"><div class="tool-icon">ğŸ”Š</div><div class="tool-title">Ù…Ø¤Ø«Ø±Ø§Øª</div><div class="tool-price">5 Ù†Ù‚Ø§Ø·</div></div>
        </div>
    </div>
    <div class="modal" id="toolModal"><div class="modal-content" id="toolContent"></div></div>

    <script>
        // *** Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ***
        const ELEVENLABS_KEY = "sk_9e048006fa8c6ebe0068240531808bba33c809c6f43313fe";
        
        let currentUser = {
            credits: parseInt(localStorage.getItem('user_credits')) || 100,
            plan: localStorage.getItem('user_plan') || 'free'
        };

        function updateUserDisplay() {
            document.getElementById('creditsDisplay').textContent = currentUser.credits;
            document.getElementById('planDisplay').textContent = currentUser.plan === 'free' ? 'Ù…Ø¬Ø§Ù†ÙŠ' : 'Ø§Ø­ØªØ±Ø§ÙÙŠ';
            localStorage.setItem('user_credits', currentUser.credits);
        }

        document.addEventListener('DOMContentLoaded', updateUserDisplay);

        function openTool(tool) {
            const modal = document.getElementById('toolModal');
            const content = document.getElementById('toolContent');
            if (tool === 'tts') content.innerHTML = getTTSInterface();
            else if (tool === 'dub') content.innerHTML = getDubbingInterface();
            else if (tool === 'sfx') content.innerHTML = getSFXInterface();
            modal.classList.add('active');
        }

        function closeModal() { document.getElementById('toolModal').classList.remove('active'); }

        // 1. Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª (ØªÙ… Ø±Ø¨Ø·Ù‡)
        function getTTSInterface() {
            return `<span class="close" onclick="closeModal()">âœ•</span><h2>ğŸ™ï¸ Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª</h2>
                <textarea id="ttsText" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ...">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Vividia</textarea>
                <button class="btn btn-primary" onclick="generateTTS()">Ø¥Ù†Ø´Ø§Ø¡ (10 Ù†Ù‚Ø§Ø·)</button>`;
        }

        async function generateTTS() {
            const text = document.getElementById('ttsText').value;
            if (currentUser.credits < 10) return alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ');
            
            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/pNInz6obpgDQGcFmaJgB`, {
                    method: 'POST',
                    headers: {'Accept': 'audio/mpeg', 'Content-Type': 'application/json', 'xi-api-key': ELEVENLABS_KEY},
                    body: JSON.stringify({text: text, model_id: 'eleven_multilingual_v2'})
                });
                const audioUrl = URL.createObjectURL(await response.blob());
                new Audio(audioUrl).play();
                currentUser.credits -= 10;
                updateUserDisplay();
            } catch (error) { alert('Ø®Ø·Ø£'); }
        }

        // 2. Ø§Ù„Ø¯Ø¨Ù„Ø¬Ø© (ØªÙ… Ø±Ø¨Ø·Ù‡Ø§)
        function getDubbingInterface() {
            return `<span class="close" onclick="closeModal()">âœ•</span><h2>ğŸŒ Ø¯Ø¨Ù„Ø¬Ø© (PRO)</h2>
                <input type="file" id="dubFile">
                <select id="targetLang"><option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option value="en">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option></select>
                <button class="btn btn-primary" onclick="startDubbing()">Ø¯Ø¨Ù„Ø¬Ø© (50 Ù†Ù‚Ø·Ø©)</button>`;
        }

        async function startDubbing() {
            const fileInput = document.getElementById('dubFile');
            if (currentUser.plan === 'free') return alert('ØªØ­ØªØ§Ø¬ Ù„Ù„ØªØ±Ù‚ÙŠØ© Ù„Ù„Ø¯Ø¨Ù„Ø¬Ø©!');
            if (currentUser.credits < 50) return alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ');
            if (fileInput.files.length === 0) return alert('Ø§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹');

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            formData.append('target_language', document.getElementById('targetLang').value);

            try {
                await fetch('https://api.elevenlabs.io/v1/dubbing', {
                    method: 'POST',
                    headers: {'xi-api-key': ELEVENLABS_KEY},
                    body: formData
                });
                currentUser.credits -= 50;
                updateUserDisplay();
                alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù Ù„Ù„Ø¯Ø¨Ù„Ø¬Ø©!');
            } catch (error) { alert('Ø®Ø·Ø£'); }
        }

        // 3. Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© (ØªÙ… Ø±Ø¨Ø·Ù‡Ø§)
        function getSFXInterface() {
            return `<span class="close" onclick="closeModal()">âœ•</span><h2>ğŸ”Š Ù…Ø¤Ø«Ø±Ø§Øª ØµÙˆØªÙŠØ©</h2>
                <input type="text" id="sfxPrompt" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ø¤Ø«Ø±...">
                <button class="btn btn-primary" onclick="generateSFX()">Ø¥Ù†Ø´Ø§Ø¡ (5 Ù†Ù‚Ø§Ø·)</button>`;
        }

        async function generateSFX() {
            const prompt = document.getElementById('sfxPrompt').value;
            if (currentUser.credits < 5) return alert('Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ');

            try {
                const response = await fetch('https://api.elevenlabs.io/v1/sound-generation', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json', 'xi-api-key': ELEVENLABS_KEY},
                    body: JSON.stringify({text: prompt})
                });
                const audioUrl = URL.createObjectURL(await response.blob());
                new Audio(audioUrl).play();
                currentUser.credits -= 5;
                updateUserDisplay();
            } catch (error) { alert('Ø®Ø·Ø£'); }
        }
    </script>
</body>
</html>

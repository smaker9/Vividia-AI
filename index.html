<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vividia - البحث العميق</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body {
            background-color: #000;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* أيقونة فيفيديا المتوهجة (محاكاة الصورة 2) */
        .vividia-star {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #4285f4, #9b51e0);
            border-radius: 50%;
            animation: pulse 2s infinite;
            margin-bottom: 20px;
        }
        
        .vividia-star::after {
            content: '✦';
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 22px;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(155, 81, 224, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(155, 81, 224, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(155, 81, 224, 0); }
        }

        /* حاوية الدردشة */
        .chat-container {
            background: #111;
            padding: 25px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            border: 1px solid #333;
        }

        /* شريط الأدوات الديناميكي (محاكاة الصورة 1) */
        .action-bar {
            display: flex;
            gap: 20px;
            background: #1e1e1e;
            padding: 10px 20px;
            border-radius: 25px;
            width: fit-content;
            margin: 20px 0;
        }

        .action-bar i {
            color: #888;
            cursor: pointer;
            transition: 0.3s;
            font-size: 18px;
        }

        .action-bar i:hover {
            color: #fff;
            transform: scale(1.2);
        }

        /* زر البحث العميق */
        .deep-search-btn {
            background: transparent;
            color: #00d1ff;
            border: 1px solid #00d1ff;
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .deep-search-btn:hover {
            background: rgba(0, 209, 255, 0.1);
            box-shadow: 0 0 10px #00d1ff;
        }
    </style>
</head>
<body>

    <div class="vividia-star"></div>

    <div class="chat-container">
        <h3>مرحباً بك في Vividia</h3>
        <p>لقد انتهينا من ربط المصادر! يمكنك الآن استخدام ميزة البحث العميق لاستخراج البيانات مباشرة من قاعدة البيانات السحابية.</p>

        <div class="action-bar">
            <i class="fas fa-ellipsis-v" title="المزيد"></i>
            <i class="far fa-copy" title="نسخ" onclick="alert('تم نسخ النص')"></i>
            <i class="fas fa-magic" title="تحسين"></i>
            <i class="far fa-thumbs-down" title="لم يعجبني"></i>
            <i class="far fa-thumbs-up" title="أعجبني"></i>
        </div>

        <button class="deep-search-btn" onclick="downloadResults()">
            <i class="fas fa-search"></i> تشغيل البحث العميق (استخراج Secret)
        </button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <script>
        // إعدادات Firebase الحقيقية الخاصة بمشروعك (studio-8235238182-c3590)
        const firebaseConfig = {
            apiKey: "AIzaSyC71p3tQ8CpgdIj2Pn2CL...", // تم جلبها من صورتك
            authDomain: "studio-8235238182-c3590.firebaseapp.com",
            databaseURL: "https://studio-8235238182-c3590-default-rtdb.firebaseio.com", // تأكد من تفعيل Realtime Database
            projectId: "studio-8235238182-c3590",
            storageBucket: "studio-8235238182-c3590.appspot.com",
            messagingSenderId: "703644313315",
            appId: "1:703644313315:web:fb8932a4980a3731804d0c"
        };

        // تهيئة Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // وظيفة البحث العميق وتحميل الملف
        async function downloadResults() {
            const btn = document.querySelector('.deep-search-btn');
            btn.innerHTML = "جاري البحث...";
            
            // جلب البيانات من المسار vividia_config/client_secret
            database.ref('vividia_config/client_secret').once('value').then((snapshot) => {
                const secret = snapshot.val();
                
                if (secret) {
                    const data = { 
                        project: "Vividia", 
                        client_secret: secret, 
                        status: "Active",
                        timestamp: new Date().toLocaleString() 
                    };
                    
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'Vividia_Secret_Export.json';
                    a.click();
                    
                    alert("نجاح! تم استخراج الملف.");
                } else {
                    alert("خطأ: لم نجد 'client_secret' في قاعدة البيانات. تأكد من إضافته يدوياً في Firebase.");
                }
                btn.innerHTML = '<i class="fas fa-search"></i> تشغيل البحث العميق';
            }).catch((error) => {
                console.error(error);
                alert("حدث خطأ في الاتصال. تأكد من إعداد القواعد (Rules) في Firebase إلى true.");
                btn.innerHTML = '<i class="fas fa-search"></i> تشغيل البحث العميق';
            });
        }
    </script>

</body>
</html>
